<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<features name="openmms-cloud-plugin-features" xmlns="http://karaf.apache.org/xmlns/features/v1.4.0">

    <!-- common for Core and Sentinel -->
    <feature name="opennms-cloud-plugin-common" description="OpenNMS :: Plugins :: Cloud :: Common" version="${project.version}">
        <feature dependency="true">aries-blueprint</feature>
        <feature dependency="true">shell</feature>
        <feature version="${opennms.api.version}" dependency="true">opennms-integration-api</feature>
        <feature version="${project.version}" dependency="true">cloud-guava</feature>
        <bundle>mvn:com.github.luben/zstd-jni/${zstd.version}</bundle>
        <bundle>mvn:org.opennms.tsaas.platform/tsaas-authenticate-grpc/${pasClientVersion}</bundle><!-- the grpc client to talk to PAS ( platform access service) -->
        <bundle>mvn:org.opennms.tsaas/tsaas-grpc/${tsaasClientVersion}</bundle><!-- the grpc client to talk to Tsaas -->
        <bundle>mvn:com.google.protobuf/protobuf-java/${protobufVersion}</bundle>
        <bundle>mvn:org.opennms.plugins.cloud/plugin-common/${project.version}</bundle>
        <bundle>mvn:org.opennms.plugins.cloud.wrap/grpc/${project.version}</bundle>
        <bundle>mvn:org.opennms.plugins.cloud.wrap/jwt/${project.version}</bundle>
        <bundle>mvn:org.json/json/${jsonVersion}</bundle>
        <bundle dependency="true">mvn:com.google.guava/failureaccess/${failureAccessVersion}</bundle>
        <bundle dependency="true">mvn:com.google.guava/guava/${guavaVersion}</bundle>
        <bundle dependency="true">mvn:io.dropwizard.metrics/metrics-core/${metricsVersion}</bundle>
    </feature>

    <!-- to be installed into OpenNMS core -->
    <feature name="opennms-cloud-plugin-core" description="OpenNMS :: Plugins :: Cloud :: Core" version="${project.version}">
        <feature version="${project.version}">opennms-cloud-plugin-common</feature>
        <bundle>mvn:org.opennms.plugins.cloud/plugin-core/${project.version}</bundle>
    </feature>

    <!-- to be installed into sentinel -->
    <feature name="opennms-cloud-plugin-sentinel" description="OpenNMS :: Plugins :: Cloud :: Sentinel" version="${project.version}">
        <feature version="${project.version}">opennms-cloud-plugin-common</feature>
        <feature>sentinel-api-layer</feature>
        <feature>sentinel-jsonstore-postgres</feature>
    </feature>

</features>
